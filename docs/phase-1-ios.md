# Phase 1: iOS proof of concept (Blink Shell)

## Goal
From iPhone, connect to a VPS, run Codex or Claude Code, and receive an ntfy push notification after a 10-second wait.

## Prerequisites
- iPhone with Blink Shell
- Tailscale iOS app
- Ubuntu 22.04 host provisioned from this repo
- ntfy app or ntfy web app (PWA)

## 1) Provision and bootstrap host
- Follow `/docs/infra-pulumi-aws.md`.
- Follow `/docs/host-setup-ubuntu-22-04.md` if needed.

## 2) Install Nomad Dev files into target repo
```bash
./scripts/nomad-dev install --target /path/to/your/repo
```

Notes:
- A random ntfy topic is generated by default.
- If you use ntfy.sh without a token, anyone with topic knowledge can post.

## 3) Set up mobile connection
1. Sign into Tailscale on iPhone.
2. In Blink Shell, connect to host.
3. Start tmux:
```bash
tmux new -s nomad
```

## 4) Validate notification loop
```bash
cd /path/to/your/repo
./scripts/nomad wait-notify 10 "nomad test"
```

## 5) Troubleshooting
- Verify Tailscale state:
```bash
tailscale status
```
- Confirm topic/server in `.nomad-dev/config.env`.
- Send manual test:
```bash
curl -d "nomad test" https://ntfy.sh/YOUR_TOPIC
```

## Security reminders
- Keep public SSH disabled unless required.
- If enabling public SSH, restrict `allowedSshCidr` tightly.
- Prefer private ntfy topics with tokens for sensitive workflows.
